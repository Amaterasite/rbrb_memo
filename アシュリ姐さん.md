# Ashuri 1 攻略情報

![Ashuri](Ashuri1/Ashuri.png)

## 諸注意

この情報は Rabi-Ribi ver 1.99t を逆アセンブルして得た情報を元に執筆しています。<br>
コードに対しての誤解や雑な検証が原因で誤った情報が混ざってる可能性があります。<br>
<br>
ここでは「超過」という単語を「未満」の対義語として使用しています。<br>
フレーム数は敵から見たもので、プレイヤーからはより少ない値となります。<br>
<br>
<br>
<br>
## 行動速度増加量
| 難易度     |   ザコ敵 |    ボス | ボス + Speed Up |
| :---: | ---: | ---: | ---: |
| CASUAL     |   +0.00% |  +0.00% |         +16.67% |
| NOVICE     |   +0.00% |  +0.00% |         +16.67% |
| NORMAL     |   +5.00% |  +5.00% |         +16.67% |
| HARD       |   +8.33% |  +8.33% |         +25.00% |
| HELL       |  +12.50% | +12.50% |         +33.33% |
| BEX        |  +16.67% | +16.67% |         +33.33% |
| UNKNOWN    |  +25.00% | +25.00% |         +33.33% |
| IMPOSSIBLE | +100.00% | +50.00% |         +33.33% |
| X-BUNNY    | +100.00% | +50.00% |         +33.33% |

※ IMPOSSIBLE 以上の難易度になると Speed Up バフが持つリミッターによって逆に行動速度が遅くなる。<br>
<br>
上記に加えて Bunny Heaven ではプレイヤーに +50% 、 Bunny Hell では全ての敵に +133.33% の行動速度増加が追加で行われる。<br>
例えば BEX + Bunny Hell ( およそ 250% ) では CASUAL ( 100% ) の約 2.5 倍の速度で動くこととなる。<br>
<br>
<br>
## 行動パターン
### ジャンプ (ATKID : 0)

最初に確定で使用してくる攻撃。<br>
ジャンプの高度と内部のカウンタは連動しているため、高度が高いほど次の着地で攻撃態勢になる可能性が高い。<br>

#### ジャンプ回数の確率
| 回数 | 確率 | 確率 (%) |
| :---: | ---: | ---: |
| 2 回 | 18/27 | 66.666% |
| 3 回 | 8/27 | 29.629% |
| 4 回 | 1/27 |  3.703% |

#### ジャンプの高さとその後の行動確率

##### **高さ 1**

![000_Jump1](Ashuri1/000_Jump1.png)

攻撃 : 33.33% ジャンプ : 66.66%

**高さ 2**

![000_Jump2](Ashuri1/000_Jump2.png)

攻撃 : 66.66% ジャンプ : 33.33%

**高さ 3**

![000_Jump3](Ashuri1/000_Jump3.png)

攻撃 : **100.00%**

#### 行動後パターン

| HP 割合 | 確率 (%) | 行動 |
| :---: | ---: | :---: |
| `HP >= 80%` | 50.00% <br> 50.00% | 赤色弾幕 <br> 水色弾幕 |
| `80% > HP >= 66%` | 50.00% <br> 25.00% <br> 25.00% | 赤色弾幕 <br> 水色弾幕 <br> 横レーザー |
| `66% > HP >= 60%` | 35.00% <br> 30.00% <br> 25.00% <br> 10.00% | 横レーザー <br> 赤色弾幕 <br> 水色弾幕 <br> イオンリング |
| `60% > HP > 55%` | 100.00% | イオンリング |
| `55% >= HP >= 50%` | 50.00% <br> 50.00% | L字屈折レーザー <br> イオンリング |
| `50% > HP >= 40%` | 50.00% <br> 17.50% <br> 15.00% <br> 12.50% <br> 5.00% | L字屈折レーザー <br> 横レーザー <br> 赤色弾幕 <br> 水色弾幕 <br> イオンリング |
| `40% > HP > 32.5%` | 50.00% <br> 50.00% | L字屈折レーザー <br> イオンリング |
| `32.5% >= HP` | 50.00% <br> 17.50% <br> 15.00% <br> 12.50% <br> 5.00% | L字屈折レーザー <br> 横レーザー <br> 赤色弾幕 <br> 水色弾幕 <br> イオンリング |
<br>
<br>
<br>
### 歩行1 (ATKID : -1)

すぐに移動を開始する。<br>
移動から攻撃まで約 100 フレームの猶予があるので攻撃しやすい。<br>

#### 行動後パターン

ジャンプ (ATKID : 0) と同じ<br>
<br>
<br>
<br>
### 歩行2 (ATKID : -2)

問題の行動。<br>
行動開始から約 40 フレーム後から移動を開始する。<br>
歩行１より移動速度がやや早く、歩行から次の攻撃までの猶予も約 50 フレームしかない。<br>
処理にバグがあり、次の行動を突発的に発動する。<br>
水色弾幕が選出されると不発に終わり、赤色弾幕は突発的に発射してくる。<br>
杖を降ろしてから歩行開始までにラグがあると感じた時はこの行動を警戒すべき。<br>
<br>
歩行1とは違い、この行動からイオンリングへ繋がる事は無い。<br>

#### 行動後パターン
| HP 割合 | 確率 (%) | 行動 |
| :---: | ---: | :---: |
| `HP > 55%` | 50.00% <br> 50.00% | 赤色弾幕 (突発) <br> 水色弾幕 (不発) |
| `55% >= HP` | 50.00% <br> 25.00% <br> 25.00% | L字屈折レーザー <br> 赤色弾幕 (突発) <br> 水色弾幕 (不発)|
<br>
<br>
<br>
### イオンリング  (ATKID : 3)

![003_IonJump](Ashuri1/003_IonJump.png)

やや低いジャンプをして `(4 + 難易度)` Way 全方位のイオンリング (◎型の弾) を放つ。<br>
ベースとなる角度は `X座標 * 5 + 90` (小数点切り捨て) 。<br>
画面端に留まることで接触ダメージの回避はできるが、イオンリングが直撃する可能性はある。<br>
画面端で直撃する理由は座標の飽和処理より前に角度決定が行われているのが原因？ [未検証]<br>
着地後はジャンプ (ATKID : 0) に移り、HP割合次第でこの行動が無限ループする。<br>

#### 行動後パターン
ジャンプ (ATKID : 0) 確定<br>
<br>
<br>
<br>
### 横レーザー (ATKID : 4)

![004_H_Laser](Ashuri1/004_H_Laser.png)

横方向にオレンジ色のレーザーを放つ。<br>
スキが大きく、次の行動も読みやすい。<br>

#### 行動後パターン
突進星屑 (ATKID : 12) 確定<br>
<br>
<br>
<br>
### 赤色弾幕 (ATKID : 5)

![005_PinkBullets](Ashuri1/005_PinkBullets.png)

赤色（ピンク色）の弾をばらまく。<br>
HP割合が 66% 未満の場合は 50% の確率でイオンリング、横レーザー、赤色弾幕のいずれかの行動が当確率で選ばれ変化する。<br>
行動変化で赤色弾幕が選ばれた場合は数フレーム後に再び行動変化の抽選処理が行われる。<br>
実際の選出確率はイオンリング 20% 、横レーザー 20% 、赤色弾幕 60% となる。<br>
行動パターンのリストではこの再抽選も考慮した確率を載せている（他の行動変化を持つ行動も同様）。<br>

#### 行動後パターン
杖降ろし (ATKID : 7) 確定<br>
<br>
<br>
<br>
### 水色弾幕 (ATKID : 6)

![006_CyanBullets](Ashuri1/006_CyanBullets.png)

水色の弾を上から扇状に放つ。<br>
半端な位置で撃たれるとかなり辛い行動。<br>
至近距離でタイミングよくジャンプすれば簡単に回避できるが、ごく一部を除いて赤色弾幕とのランダム選出なのでほぼ運任せとなる。<br>
HP割合が 80% 未満の場合は 50% の確率で横レーザーに変化する。<br>

#### 行動後パターン
杖降ろし (ATKID : 7) 確定<br>
<br>
<br>
<br>
### 杖降ろし (ATKID : 7)
杖を降ろすだけの行動。<br>
この行動を取った累計回数によって次の行動が決定する。<br>

#### 行動後パターン
| 回数 | HP 割合 | 確率 (%) | 行動 |
| :---: | :---: | ---: | :---: |
| 3 | `N/A` | 100.00% | 縦レーザー |
| 3 を除く 3 の倍数 | `N/A` | 100.00% | ジャンプ移動 |
| 5 の倍数 | `HP >= 80%` | 66.66% <br> 16.66% <br> 16.66% | 歩行1 <br> 赤色弾幕 <br> 水色弾幕 |
| 5 の倍数 | `80% > HP >= 66%` | 66.66% <br> 16.66% <br> 8.33% <br> 8.33% | 歩行1 <br> 赤色弾幕 <br> 水色弾幕 <br> 横レーザー|
| 5 の倍数 | `66% > HP` | 66.66% <br> 11.66% <br> 10.00% <br> 8.33% <br> 3.33% | 歩行1 <br> 横レーザー <br> 赤色弾幕 <br> 水色弾幕 <br> イオンリング |
| その他 | `N/A` | 33.33% <br> 33.33% <br> 33.33% | ジャンプ <br> 歩行1 <br> 歩行2 |
<br>
<br>
<br>
### ジャンプ移動 (ATKID : 8)

![008_HopWalk](Ashuri1/008_HopWalk.png)

ジャンプしつつ歩いて向かってくる。<br>
画面端にいる状態でこの行動に移ると画面端に向かって歩く。<br>
正しく対応できれば最もスキが大きく次の行動も読みやすい攻撃。<br>
HP 割合が 50% 超過、 50% 以下用でそれぞれ個別に行動が用意されている。<br>
行動パターンのカウンタも個別に用意されている。<br>

#### 行動後パターン

##### HP 割合 50% 超過
| カウンタ | HP 割合 | 確率 (%) | 行動 |
| :---: | :---: | ---: | :---: |
| 1 | `N/A` | 100% | 突進星屑 |
| 2 | `HP >= 66%` | 33.33% <br> 33.33% <br> 33.33% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 2 | `66% > HP` | 40.00% <br> 40.00% <br> 20.00% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 3 | `HP >= 80%` | 100.00% | 水色弾幕 |
| 3 | `80% > HP` | 50.00% <br> 50.00% | 水色弾幕 <br> 横レーザー |
| 4 | `HP > 66%` | 100.00% | 突進星屑 |
| 4 | `HP == 66%` | 33.33% <br> 33.33% <br> 33.33% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 4 | `66% > HP` | 40.00% <br> 40.00% <br> 20.00% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 5 | `N/A` | 100.00% | 突進星屑 |

※ : 5 の次は 1 の行動に戻るが、カウンタが 6 の倍数の場合はL字屈折レーザーが割り込む<br>

##### HP 割合 50% 以下
3 種類のカウンタが同時に回っていて、優先度は C > B > A
| カウンタ | カウンタ A 行動 | カウンタ B 行動 | カウンタ C 行動 |
| :---: | :---: | :---: | :---: |
| 1 | 横レーザー | 突進星屑 | カットイン攻撃 |
| 2 | 縦レーザー | | 縦レーザー |
| 3 | 50.00% 水色弾幕 <br> 50.00% 横レーザー | | |
| 4 | L字屈折レーザー | | |
| 5 | イオンリング | | |
| 6 | 40.00% イオンリング <br> 40.00% 横レーザー <br> 20.00% 赤色弾幕 | | |
| 7 | 突進星屑 | ※ 6 の次は 1 の行動に戻る | |
| 8 | ※ 7 の次は 1 の行動に戻る | | 縦レーザー |
| 9 ~ 14 | | | |
| 15| | | ※ 14 の次は 1 の行動に戻る |

###### 30 までの行動パターンまとめ
| カウンタ | 確率 (%) | 行動 |
| :---: | ---:| :---: |
| 1 | 100.00% | カットイン攻撃 |
| 2 | 100.00% | 縦レーザー |
| 3 | 50.00% <br> 50.00% | 水色弾幕 <br> 横レーザー |
| 4 | 100.00% | L字屈折レーザー |
| 5 | 100.00% | イオンリング |
| 6 | 40.00% <br> 20.00% <br> 20.00% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 7 | 100.00% | 突進星屑 |
| 8 | 100.00% | 縦レーザー |
| 9 | 100.00% | 縦レーザー |
| 10 | 50.00% <br> 50.00% | 水色弾幕 <br> 横レーザー |
| 11 | 100.00% | L字屈折レーザー |
| 12 | 100.00% | イオンリング |
| 13 | 100.00% | 突進星屑 |
| 14 | 100.00% | 突進星屑 |
| 15 | 100.00% | カットイン攻撃 |
| 16 | 100.00% | 縦レーザー |
| 17 | 50.00% <br> 50.00% | 水色弾幕 <br> 横レーザー |
| 18 | 100.00% | L字屈折レーザー |
| 19 | 100.00% | 突進星屑 |
| 20 | 40.00% <br> 20.00% <br> 20.00% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 21 | 100.00% | 突進星屑 |
| 22 | 100.00% | 縦レーザー |
| 23 | 100.00% | 縦レーザー |
| 24 | 50.00% <br> 50.00% | 水色弾幕 <br> 横レーザー |
| 25 | 100.00% | 突進星屑 |
| 26 | 100.00% | イオンリング |
| 27 | 40.00% <br> 20.00% <br> 20.00% | イオンリング <br> 横レーザー <br> 赤色弾幕 |
| 28 | 100.00% | 突進星屑 |
| 29 | 100.00% | カットイン攻撃 |
| 30 | 100.00% | 縦レーザー |
<br>
<br>
<br>
### L字屈折レーザー (ATKID : 11 → 20)

![020_L_Laser](Ashuri1/020_L_Laser.png)

画面端に寄せれば当たらない。<br>
難易度 HELL 以上の場合では 50% の確率でレーザーを再度放ち、その後も同じ抽選処理が入る。<br>
わたしは 10 回連続 (1/512) で撃たれて死んだことがあります v(^-^)<br>

#### 行動後パターン
突進星屑 (ATKID: 12) 確定<br>
<br>
<br>
<br>
### 突進星屑 (ATKID : 12)
突進攻撃 (ATKID : 52) と追尾星屑 (ATKID : 30) を選ぶための中間行動。<br>
この行動の累計回数が奇数なら突進攻撃 (ATKID : 52) 、偶数なら追尾星屑 (ATKID : 30) へ即座に移る。<br>
ただしジャンプ移動 (ATKID : 8) が持つ HP 50% 未満の行動カウンタ A と 7 の剰余が 6 の時に場合、縦レーザー (ATKID : 27) が割り込む。<br>

#### 行動後パターン
本文参照<br>
<br>
<br>
<br>
### 突進攻撃 (ATKID : 52 → 53)

![052_Vroom](Ashuri1/052_Vroom.png)

杖に飛び乗り、画面を 4 回往復する。<br>
着地する方向は最初の飛んだ方向と逆方向であることを意識すると楽。<br>
難易度が高いほど終了時の位置がずれる。<br>
X-BUNNY になると位置が画面外まで飛び出てしまい、往復の繰り返しが優先されて突進攻撃が無限ループする。<br>

#### 行動後パターン
ジャンプ移動 (ATKID: 8) 確定<br>
<br>
<br>
<br>
### 追尾星屑 (ATKID : 30)

![030_HomingStardust](Ashuri1/030_HomingStardust.png)

[特に書くことが無い]<br>

#### 行動後パターン
杖降ろし (ATKID : 7) 確定<br>
<br>
<br>
<br>
### カットイン (ATKID : 14 → 13)

![013_CutinStardust](Ashuri1/013_CutinStardust.png)

ジャンプ中の仕様はジャンプ (ATKID : 0) と同じ。<br>
`(18 - 難易度)` 個に 1 個、基礎威力が 3.33 倍の弾が発生する。<br>
CASUAL では 18 個に 1 個、 BEX では 13 個に 1 個、 X-BUNNY では 8 個に 1 個発生する。<br>
着地後にジャンプ (ATKID : 0) に移るが、ジャンプ高度が初期化されていないので非常に高いジャンプを 1 回して次の行動に移る。<br>

#### 行動後パターン
ジャンプ (ATKID : 0) 確定<br>
<br>
<br>
<br>
### 魔法陣レーザー (ATKID : 777 → 877)

![777_CircleLaser](Ashuri1/777_CircleLaser.png)

Defense Boost+ が発動し、次の行動が確定した後に割り込む形で開始する。<br>
歩行 2 で発動させた場合はバグの影響で次の行動で割り込まれない。<br>
また、一部の行動では割り込まれない (どの行動が割り込まれないかは未検証) 。<br>

#### 行動後パターン
ジャンプ移動 (ATKID : 8) 確定<br>
<br>
<br>
<br>
## 最後に
Bunny Hell の場合、どれだけロジックを理解していようが結局はジャンプなどの運行動で攻撃計画が破綻するクソゲーです。<br>
いくら取り組んでも安定することはおそらく一生ありません。<br>
(これは Bunny Hell の全ての敵に言えそう。私が Bunny Hell をプレイしない一番の理由です)<br>
Map transition RCS を使って飛ばすことを強く推奨します。<br>